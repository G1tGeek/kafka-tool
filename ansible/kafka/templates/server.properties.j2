# Kafka Configuration for KRaft mode

# Broker and controller role
process.roles=broker,controller

# Node ID
node.id={{ node_id }}

# Controller quorum voters
# Assuming you have 3 nodes, you should list all of them here.
controller.quorum.voters=1@{{ kafka_host1 }}:9093,2@{{ kafka_host2 }}:9093,3@{{ kafka_host3 }}:9093

# Listeners
listeners=PLAINTEXT://{{ kafka_host1 }}:9092,CONTROLLER://{{ kafka_host1 }}:9093
advertised.listeners=PLAINTEXT://{{ kafka_host1 }}:9092,CONTROLLER://{{ kafka_host1 }}:9093

# Ensure controller.listener.names has a value present in 'listeners'
controller.listener.names=CONTROLLER

# Security protocols for listeners
listener.security.protocol.map=PLAINTEXT:PLAINTEXT,CONTROLLER:PLAINTEXT

# Inter-broker communication listener
inter.broker.listener.name=PLAINTEXT

# Kafka data directory
log.dirs=/tmp/kraft-combined-logs

# Number of partitions
num.partitions=1

# Kafka cluster ID
# The ID is dynamically generated and set using Ansible facts
log.retention.hours=168
log.segment.bytes=1073741824
log.retention.check.interval.ms=300000

# Internal topics settings
offsets.topic.replication.factor=1
transaction.state.log.replication.factor=1
transaction.state.log.min.isr=1
